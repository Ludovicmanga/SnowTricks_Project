{% extends 'base.html.twig' %}

{% block stylesheets %}
    <style>
        #trickHero {
            background: url('../../{{ trick.coverImagePath }}') center top no-repeat; 
            background-size: 100% auto;
        }
    </style>
{% endblock %}

{% block body %}

    <div id="trickHero">   
    </div>
    <h1> {{ trick.name }} </h1>

    {% if app.user %}
    <button id="updateButton"><a href="{{ path("trick_update", {"id": trick.id}) }}">Modifier la figure<a/></button>
    {% endif %}

    <div id="mediaSection">
        {% for video in trick.videos %}
            <div class="mediaContainer">
                <div class="media" id="media1">
                    {{ video.path|raw }}
                </div>
            </div>
        {% endfor %}

        {% for image in trick.images %}
            <div class="mediaContainer">
                <div class="media" id="media2"><img src="../../{{ image.path }}"></div>
            </div>       
        {% endfor %}
    </div>

<div id="trick_infos">
        <h3>Infos</h3>
        <div>Date de création : {{ trick.creationDate|date('d/m/Y H:i', timezone="Europe/Paris") }} </div>
        <div>Date de la dernière modification : {{ trick.updateDate|date('d/m/Y H:i', timezone="Europe/Paris") }} </div>
        <div>Groupe : {{ trick.trickGroup.name }}</div>
</div>

<div id="trick_description">
    <h3>Description de la figure</h3>
    <p>
        {{ trick.description }}
    </p>
</div>


{# comment system #}

    {# We display the comment form #}

{% for message in app.flashes('message') %}
        <div class="flash-message" id="comment_flash_message">
            {{ message }}
        </div>
{% endfor %}

{% if app.user %}

{{ form_start(commentForm) }}
<label>Ecrivez votre commentaire</label><br>
{{ form_row(commentForm.commentContent) }}
<button type="submit">Créer le commentaire</button>
{{ form_end(commentForm) }}

{% endif %}


{# We display the comments related with the trick #}
<div id="commentSection">
    {% for paginatedComment in paginatedComments %}
        <div class="commentContainer">
            <div class="commentPicture">
                <img src="../../{{ paginatedComment.user.profilePicturePath }}">
            </div>
            <div class="commentContent">
                <p> {{ paginatedComment.commentContent }} </p>
            </div>
        </div>
        <hr>
    {% endfor %}
        <ul>
            <div class="pageContainer">
                {% for item in 1..(( totalComments / limit)|round(0,'ceil')) %}
                    <li class="pageList">
                        <div class="page">
                            <a href="?page={{ item }}">{{ item }}</a>
                        </div>
                    </li>
                {% endfor %}
            </div>    
        </ul>
</div>

{% endblock %}